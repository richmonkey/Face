!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.JitsiMeetExternalAPI=t():e.JitsiMeetExternalAPI=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e,t){e.send(t)}function o(e,t,n){return t in f?void i(e,{method:"jitsiSystemMessage",params:{type:"eventStatus",name:f[t],value:n}}):void console.error("Not supported event name.")}function r(e,t,n,i,o,r,p,f){if((!n||n<a)&&(n=a),(!i||i<d)&&(i=d),this.parentNode=null,o)this.parentNode=o;else{var m=document.scripts[document.scripts.length-1];this.parentNode=m.parentNode}this.iframeHolder=this.parentNode.appendChild(document.createElement("div")),this.iframeHolder.id="jitsiConference"+l,n&&(this.iframeHolder.style.width=n+"px"),i&&(this.iframeHolder.style.height=i+"px"),this.frameName="jitsiConferenceFrame"+l,this.url=f?"http":"https://"+e+"/",t&&(this.url+=t),this.url+="#jitsi_meet_external_api_id="+l;var h;if(r)for(h in r)r.hasOwnProperty(h)&&"string"==typeof h&&(this.url+="&config."+h+"="+r[h]);if(p)for(h in p)p.hasOwnProperty(h)&&"string"==typeof h&&(this.url+="&interfaceConfig."+h+"="+p[h]);this.frame=document.createElement("iframe"),this.frame.src=this.url,this.frame.name=this.frameName,this.frame.id=this.frameName,this.frame.width="100%",this.frame.height="100%",this.frame.setAttribute("allowFullScreen","true"),this.frame=this.iframeHolder.appendChild(this.frame),this.postis=s({window:this.frame.contentWindow,scope:"jitsi_meet_external_api_"+l}),this.eventHandlers={},l++}var s=n(1),a=790,d=300,l=0,p={displayName:"display-name",toggleAudio:"toggle-audio",toggleVideo:"toggle-video",toggleFilmStrip:"toggle-film-strip",toggleChat:"toggle-chat",toggleContactList:"toggle-contact-list",toggleShareScreen:"toggle-share-screen",hangup:"video-hangup"},f={incomingMessage:"incoming-message",outgoingMessage:"outgoing-message",displayNameChange:"display-name-change",participantJoined:"participant-joined",participantLeft:"participant-left",videoConferenceJoined:"video-conference-joined",videoConferenceLeft:"video-conference-left",readyToClose:"video-ready-to-close"};r.prototype.executeCommand=function(e,t){if(!(e in p))return void console.error("Not supported command name.");var n=t;n||(n=[]),i(this.postis,{method:p[e],params:n})},r.prototype.executeCommands=function(e){for(var t in e)this.executeCommand(t,e[t])},r.prototype.addEventListeners=function(e){for(var t in e)this.addEventListener(t,e[t])},r.prototype.addEventListener=function(e,t){return e in f?(e in this.eventHandlers||this.postis.listen(f[e],function(t){e in this.eventHandlers&&"function"==typeof this.eventHandlers[e]&&this.eventHandlers[e].call(null,t)}.bind(this)),this.eventHandlers[e]=t,void o(this.postis,e,!0)):void console.error("Not supported event name.")},r.prototype.removeEventListener=function(e){return e in this.eventHandlers?(delete this.eventHandlers[e],void o(this.postis,e,!1)):void console.error("The event "+e+" is not registered.")},r.prototype.removeEventListeners=function(e){for(var t=0;t<e.length;t++)this.removeEventListener(e[t])},r.prototype.dispose=function(){this.postis.destroy();var e=document.getElementById(this.frameName);e&&(e.src="about:blank");var t=this;window.setTimeout(function(){t.iframeHolder.removeChild(t.frame),t.iframeHolder.parentNode.removeChild(t.iframeHolder)},10)},e.exports=r},function(e,t){function n(e){var t,n=e.scope,i=e.window,o=e.windowForEventListening||window,r={},s=[],a={},d=!1,l="__ready__",p=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}if(t.postis&&t.scope===n){var i=r[t.method];if(i)for(var o=0;o<i.length;o++)i[o].call(null,t.params);else a[t.method]=a[t.method]||[],a[t.method].push(t.params)}};o.addEventListener("message",p,!1);var f={listen:function(e,t){r[e]=r[e]||[],r[e].push(t);var n=a[e];if(n)for(var i=r[e],o=0;o<i.length;o++)for(var s=0;s<n.length;s++)i[o].call(null,n[s]);delete a[e]},send:function(e){var t=e.method;(d||e.method===l)&&i&&"function"==typeof i.postMessage?i.postMessage(JSON.stringify({postis:!0,scope:n,method:t,params:e.params}),"*"):s.push(e)},ready:function(e){d?e():setTimeout(function(){f.ready(e)},50)},destroy:function(e){clearInterval(t),d=!1,o&&"function"==typeof o.removeEventListener&&o.removeEventListener("message",p),e&&e()}},m=+new Date+Math.random()+"";return t=setInterval(function(){f.send({method:l,params:m})},50),f.listen(l,function(e){if(e===m){clearInterval(t),d=!0;for(var n=0;n<s.length;n++)f.send(s[n]);s=[]}else f.send({method:l,params:e})}),f}e.exports=n}])});
//# sourceMappingURL=external_api.min.map